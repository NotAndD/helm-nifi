{
    "encodingVersion": {
        "majorVersion": 2,
        "minorVersion": 0
    },
    "maxTimerDrivenThreadCount": 10,
    "registries": [
        {{- if or .Values.registry.enabled .Values.registry.url }}
        {
            "identifier": "{{ .Values.properties.defaultFlowIdentifiers.defaultRegistryId }}",
            "instanceIdentifier": "{{ .Values.properties.defaultFlowIdentifiers.defaultRegistryId }}",
            "name": "default",
            "type": "org.apache.nifi.registry.flow.NifiRegistryFlowRegistryClient",
            "bundle": {
                "group": "org.apache.nifi",
                "artifact": "nifi-flow-registry-client-nar",
                "version": "2.4.0"
            },
            "properties": {
                "url": {{ include "registry.url" . | quote }}
            },
            "propertyDescriptors": {},
            "componentType": "FLOW_REGISTRY_CLIENT"
        }
        {{- end }}
    ],
    "parameterContexts": [],
    "parameterProviders": [],
    "controllerServices": [],
    "reportingTasks": [],
    "flowAnalysisRules": [],
    "rootGroup": {
        "identifier": "{{ .Values.properties.defaultFlowIdentifiers.rootGroupId }}",
        "instanceIdentifier": "{{ .Values.properties.defaultFlowIdentifiers.rootGroupInstance }}",
        "name": "NiFi Flow",
        "comments": "",
        "position": {
            "x": 0.0,
            "y": 0.0
        },
        "processGroups": [],
        "remoteProcessGroups": [],
        "processors": [],
        "inputPorts": [],
        "outputPorts": [],
        "connections": [],
        "labels": [],
        "funnels": [],
        "controllerServices": [],
        "defaultFlowFileExpiration": "0 sec",
        "defaultBackPressureObjectThreshold": 10000,
        "defaultBackPressureDataSizeThreshold": "1 GB",
        "scheduledState": "ENABLED",
        "executionEngine": "INHERITED",
        "maxConcurrentTasks": 1,
        "statelessFlowTimeout": "1 min",
        "flowFileConcurrency": "UNBOUNDED",
        "flowFileOutboundPolicy": "STREAM_WHEN_AVAILABLE",
        "componentType": "PROCESS_GROUP"
    }
}